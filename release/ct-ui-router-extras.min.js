/** UI-Router Extras v.0.1.3 Monolithic build (all modules) http://christopherthielen.github.io/ui-router-extras/ - MIT License */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["angular"],function(t){e(t)}):e("object"==typeof exports?require("angular"):t.angular)}(this,function(t,e){function n(e,n){function r(e,n){return b[e.self.name]=e,e.self.$$state=function(){return b[e.self.name]},t.forEach(E,function(t){t(e)}),n(e)}e.decorator("parent",r),r.$inject=["state","parentFn"]}function r(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var n=[];return t.forEach(e,function(t,e){n.push(e)}),n}function i(t,e){var n=[];for(var r in t)e&&e.indexOf(r)!==-1||n.push(r);return n}function o(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,r=Number(arguments[2])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=n);r<n;r++)if(r in t&&t[r]===e)return r;return-1}function u(t,e,n,i){var u,s=r(n,i),c={},f=[];for(var l in s)if(s[l].params&&(u=P(s[l].params)?s[l].params:a(s[l].params),u.length))for(var p in u)o(f,u[p])>=0||(f.push(u[p]),c[u[p]]=t[u[p]]);return k({},c,e)}function s(t,e){return k(new(k(function(){},{prototype:t})),e)}function c(t){E.push(t)}function f(){O=e}function l(t){function e(t,e){return n=t.transitionTo,t.transitionTo=function(r,a,i){return i&&i.ignoreDsr&&(O=i.ignoreDsr),n.apply(t,arguments).then(function(t){return f(),t},function(t){return f(),e.reject(t)})},t}var n;e.$inject=["$delegate","$q"],t.decorator("$state",e)}function p(n,r,a){function i(t){var e=t.name;return l.hasOwnProperty(e)?l[e]:void u(e)}function o(e){var n=e.deepStateRedirect||e.dsr;if(!n)return{dsr:!1};var r={dsr:!0};return t.isFunction(n)?r.fn=n:t.isObject(n)&&(r=t.extend(r,n)),t.isString(r["default"])&&(r["default"]={state:r["default"]}),r.fn||(r.fn=["$dsr$",function(t){return t.redirect.state!=t.to.state}]),r}function u(t){var n=r.get(t);if(!n)return!1;var a=o(n);a.dsr&&(l[n.name]=p,f[t]===e&&(f[t]={}));var i=n.$$state&&n.$$state().parent;if(i){var s=u(i.self.name);s&&l[n.name]===e&&(l[n.name]=v)}return l[n.name]||!1}function s(n,r){r===!0&&(r=Object.keys(n)),null!==r&&r!==e||(r=[]);var a={};return t.forEach(r.sort(),function(t){a[t]=n[t]}),a}function c(e,n){function r(t){return t?t.toString():t}var a=s(e,n),i={};return t.forEach(a,function(t,e){i[e]=r(t)}),t.toJson(i)}var f={},l={},p="Redirect",v="AncestorRedirect";return n.$on("$stateChangeStart",function(e,n,u,l,v){var d=o(n);if(!O&&(i(n)===p||d["default"])){var m=c(u,d.params),h=f[n.name][m]||d["default"];if(h){var $={redirect:{state:h.state,params:h.params},to:{state:n.name,params:u}},g=a.invoke(d.fn,n,{$dsr$:$});if(g){g.state&&(h=g),e.preventDefault();var x=s(u,d.params);r.go(h.state,t.extend(x,h.params))}}}}),n.$on("$stateChangeSuccess",function(e,n,a,u,s){var l=i(n);if(l){var p=n.name;t.forEach(f,function(e,i){var u=o(r.get(i)),s=c(a,u.params);n.$$state().includes[i]&&(f[i][s]={state:p,params:t.copy(a)})})}}),{getRedirect:function(t,e){var n=r.get(t);i(n);var a=o(n),u=c(e,a.params),s=f[n.name];return s=s&&s[u]?s[u]:a["default"]},reset:function(e,n){if(e){var a=r.get(e);if(!a)throw new Error("Unknown state: "+e);if(f[a.name])if(n){var i=c(n,o(a).params);delete f[a.name][i]}else f[a.name]={}}else t.forEach(f,function(t,e){f[e]={}})}}}function v(t){}function d(e,n){function r(e,n,r,a,f){function p(){var e={};return t.forEach(c,function(t,n){for(var r=d(t),a=0;a<r.length;a++){var i=r[a].parent;e[i.name]=e[i.name]||[],e[i.name].push(t)}e[""]&&(e.__inactives=e[""])}),e}function v(){var t={};return u(c,function(e){u(e.path,function(n){n!==e&&(t[n.name]=t[n.name]||[],t[n.name].push(e))})}),t}function d(t){var e=[];if(!t)return e;do t.sticky&&e.push(t),t=t.parent;while(t);return e.reverse(),e}function m(t,e,n,r){if(r)return"reload";var a=c[t.self.name];if(!a)return"enter";if(t.self===n)return"reload";var i=$(t.ownParams,e,a.locals.globals.$stateParams);return i?"reactivate":"reload"}function h(t,e){var n=c[t.name];if(!n)return null;if(!e)return n;var r=$(t.ownParams,e,n.locals.globals.$stateParams);return r?n:null}function $(t,e,n){return"function"==typeof t.$$equals?t.$$equals(e,n):g(e,n,t)}function g(e,n,r){if(!t.isArray(r)&&t.isObject(r)&&(r=o(r,["$$keys","$$values","$$equals","$$validates","$$new","$$parent"])),!r){r=[];for(var a in e)r.push(a)}for(var i=0;i<r.length;i++){var u=r[i];if(e[u]!=n[u])return!1}return!0}function x(t){var e=t.fromState.path,a=t.toState.path,o=t.toParams,u=0,s=a[u];for(t.options&&t.options.inherit&&(o=t.toParams=i(r,o||{},n.$current,t.toState));s&&s===e[u]&&$(s.ownParams,o,t.fromParams);)s=a[++u];return{keep:u,retained:e.slice(0,u),exiting:e.slice(u),entering:a.slice(u)}}function y(t,e){return t.name.split(".").length-e.name.split(".").length}var S={getInactiveStates:function(){return s(c,t.identity).sort(y)},getInactiveStatesByParent:function(){return p()},processTransition:function(e){function n(t){return function(e){return t.indexOf(e)===-1}}function r(t,e){return t.concat(e)}function a(t){return function(e){return e[t]}}function i(t){return function(e){return e.type===t}}function o(t){return function(e){return e.parent===t}}function u(t){return!t.sticky}var s,c,f,l=x(e),p=S.getInactiveStates(),d=l.keep,h=n(l.entering),$=l.exiting[0]&&l.exiting[0].sticky&&l.entering.length>0;c=l.exiting.map(function(t){var e=l.entering.indexOf(t)!==-1,n=$&&!e?"inactivate":"exit";return{type:n,state:t}});var g=e.options&&!!e.options.reload;f=l.entering.map(function(t){var n=m(t,e.toParams,e.reloadStateTree,g);return g=g||"reload"===n,{type:n,state:t}});var b=l.entering.map(function(t){return p.filter(o(t.parent))}).reduce(r,[]).filter(h).filter(u).concat(p.filter(o(e.toState))),E=v(),j=b.map(function(t){return E[t.name]}).filter(t.isDefined).reduce(r,[]).concat(b).sort(y),k=c.filter(i("exit")).map(a("state")).concat(j);return s=p.filter(n(k)).filter(n(l.entering)).concat(c.filter(i("inactivate")).map(a("state"))).sort(y),{keep:d,enter:new Array(d).concat(f.map(a("type"))),exit:new Array(d).concat(c.map(a("type"))),inactives:s,reactivatingStates:f.filter(i("reactivate")).map(a("state")),orphans:j}},stateInactivated:function(t){c[t.self.name]=t,t.self.status="inactive",t.self.onInactivate&&a.invoke(t.self.onInactivate,t.self,t.locals.globals)},stateReactivated:function(t){c[t.self.name]&&delete c[t.self.name],t.self.status="entered",t.self.onReactivate&&a.invoke(t.self.onReactivate,t.self,t.locals.globals)},stateExiting:function(e,n,r){var i={};t.forEach(n,function(t){i[t.self.name]=!0}),t.forEach(c,function(n,r){!i[r]&&n.includes[e.name]&&(l&&f.debug("Exiting "+r+" because it's a substate of "+e.name+" and wasn't found in ",i),n.self.onExit&&a.invoke(n.self.onExit,n.self,n.locals.globals),t.forEach(n.locals,function(t,e){delete M.locals[e]}),n.locals=null,n.self.status="exited",delete c[r])}),r&&a.invoke(r,e.self,e.locals.globals),e.locals=null,e.self.status="exited",delete c[e.self.name]},stateEntering:function(t,e,n,r){var i=h(t);if(i&&(r||!h(t,e))){var o=t.locals;this.stateExiting(i),t.locals=o}t.self.status="entered",n&&a.invoke(n,t.self,t.locals.globals)},reset:function(r,a){function i(t){S.reset(t)}if("*"===r)return t.forEach(S.getInactiveStates(),i),!0;var o=n.get(r);if(!o)return!1;var u=h(o,a);return!!u&&(S.stateExiting(u),e.$broadcast("$viewContentLoading"),!0)}};return S}var a=n,i=a.inheritParams,o=(a.objectKeys,a.protoKeys),u=a.forEach,s=a.map,c={},f={},l=!1;this.registerStickyState=function(t){f[t.name]=t},this.enableDebug=this.debugMode=function(e){return t.isDefined(e)&&(l=e),l},this.$get=r,r.$inject=["$rootScope","$state","$stateParams","$injector","$log"]}function m(t){return{resolve:{},locals:{globals:_&&_.locals&&_.locals.globals},views:{},self:{},params:{},ownParams:N.hasParamSet?{$$equals:function(){return!0}}:[],surrogateType:t}}function h(t){I=t}function $(n,r,a,i,o){function u(n,r,o){return _=n.$current,l[""]=_,_.parent=M,M.parent=e,M.locals=p(D,M.locals),_.locals=p(M.locals,_.locals),delete M.locals.globals,$=n.transitionTo,n.transitionTo=function(e,u,f){function p(e){var n=t.extend(new m("reactivate_phase1"),{locals:e.locals});return n.self=t.extend({},e.self),n}function h(e){var n=t.extend(new m("reactivate_phase2"),e),r=n.self.onEnter;return n.resolve={},n.views={},n.self.onEnter=function(){n.locals=e.locals,I.stateReactivated(e)},J.addRestoreFunction(function(){e.self.onEnter=r}),n}function g(t){var e=new m("inactivate");e.self=t.self;var n=t.self.onExit;return e.self.onExit=function(){I.stateInactivated(t)},J.addRestoreFunction(function(){t.self.onExit=n}),e}function x(t,e){var n=t.self.onEnter;return t.self.onEnter=function(){I.stateEntering(t,e,n)},J.addRestoreFunction(function(){t.self.onEnter=n}),t}function y(t,e){var n=t.self.onEnter;return t.self.onEnter=function(){I.stateEntering(t,e,n,!0)},J.addRestoreFunction(function(){t.self.onEnter=n}),t}function S(t){var e=t.self.onExit;return t.self.onExit=function(){I.stateExiting(t,K,e)},J.addRestoreFunction(function(){t.self.onExit=e}),t}var b=a.debugMode();M.locals||(M.locals=_.locals);var E=C.length;q&&(q(),b&&r.debug("Restored paths from pending transition"));var j,k,P,w,F=n.$current,R=n.params,A=f&&f.relative||n.$current,O=n.get(e,A),T=[],K=[];u=u||{},arguments[1]=u;var z=function(){},J=function(){j&&(B.path=j,j=null),k&&(F.path=k,k=null),t.forEach(J.restoreFunctions,function(t){t()}),J=z,q=null,C.splice(E,1)};if(J.restoreFunctions=[],J.addRestoreFunction=function(t){this.restoreFunctions.push(t)},O){var B=l[O.name];if(B){j=B.path,k=F.path;var L=f&&f.reload||!1,V=L&&(L===!0?j[0].self:n.get(L,A));f&&L&&L!==!0&&delete f.reload;var H={toState:B,toParams:u||{},fromState:F,fromParams:R||{},options:f,reloadStateTree:V};if(C.push(H),q=J,V){H.toParams.$$uirouterextrasreload=Math.random();var U=V.$$state().params,W=V.$$state().ownParams;if(N.hasParamSet){var Y=new i.Param("$$uirouterextrasreload");U.$$uirouterextrasreload=W.$$uirouterextrasreload=Y,J.restoreFunctions.push(function(){delete U.$$uirouterextrasreload,delete W.$$uirouterextrasreload})}else U.push("$$uirouterextrasreload"),W.push("$$uirouterextrasreload"),J.restoreFunctions.push(function(){U.length=U.length-1,W.length=W.length-1})}P=I.processTransition(H),b&&s(r,H,P);var G=B.path.slice(0,P.keep),Q=F.path.slice(0,P.keep);t.forEach(M.locals,function(t,e){e.indexOf("@")!=-1&&delete M.locals[e]});var X=function(t){return function(e,n){n.indexOf("@")!==-1&&(t[n]=e)}};v(P.inactives,function(t){v(t.locals,X(M.locals))}),v(P.reactivatingStates,function(t){v(t.locals,X(D))}),J.addRestoreFunction(function(){v(D,function(t,e){delete D[e]})}),t.forEach(P.enter,function(t,e){var n,r=B.path[e];"reactivate"===t?(n=p(r),G.push(n),Q.push(n),T.push(h(r)),w=r):"reload"===t?(G.push(y(r)),w=r):"enter"===t&&G.push(x(r))}),t.forEach(P.exit,function(t,e){var n=F.path[e];"inactivate"===t?(Q.push(g(n)),K.push(n)):"exit"===t&&(Q.push(S(n)),K.push(n))}),T.length&&t.forEach(T,function(t){G.push(t)});var Z=P.orphans;Q=Q.concat(d(Z,function(t){return S(t)})),K=K.concat(Z),F.path=Q,B.path=G;var tt=function(t){return(t.surrogateType?t.surrogateType+":":"")+t.self.name};b&&r.debug("SurrogateFromPath: ",d(Q,tt)),b&&r.debug("SurrogateToPath:   ",d(G,tt))}}var et=$.apply(n,arguments);return et.then(function(t){return J(),b&&c(r,l[t.name],n),t.status="active",t},function(t){return J(),b&&"transition prevented"!==t.message&&"transition aborted"!==t.message&&"transition superseded"!==t.message&&(r.debug("transition failed",t),r.debug(t.stack)),o.reject(t)})},n}function s(e,n,r){function a(t,e,n){return t[e]?t[e].toUpperCase()+": "+n.self.name:"("+n.self.name+")"}var i=d(r.inactives,function(t){return t.self.name}),o=d(n.toState.path,function(t,e){return a(r.enter,e,t)}),u=d(n.fromState.path,function(t,e){return a(r.exit,e,t)}),s=n.fromState.self.name+": "+t.toJson(n.fromParams)+":  -> "+n.toState.self.name+": "+t.toJson(n.toParams);e.debug("------------------------------------------------------"),e.debug("   Current transition: ",s),e.debug("Before transition, inactives are:   : ",d(I.getInactiveStates(),function(t){return t.self.name})),e.debug("After transition,  inactives will be: ",i),e.debug("Transition will exit:  ",u),e.debug("Transition will enter: ",o)}function c(t,e,n){t.debug("Current state: "+e.self.name+", inactive states: ",d(I.getInactiveStates(),function(t){return t.self.name}));for(var r=function(t,e){return"globals"!=e&&"resolve"!=e},a=function(t){var e=h(t.locals,r);return Object.keys(e).length||(e[""]={$$state:{name:null}}),d(e,function(e,n){return{localsFor:t.self.name?t.self.name:"(root)",uiViewName:n||null,filledByState:e.$$state.name}})},i=a(e),o=e.parent;o&&o!==e;)i=i.concat(a(o)),e=o,o=e.parent;t.debug("Views active on each state:"),console.table(i.reverse())}var f=o,l=f.internalStates,p=f.inherit,v=(f.inheritParams,f.forEach),d=f.map,h=f.filterObj;N.hasParamSet=!!i.ParamSet,M=t.extend(new m("__inactives"),{self:{name:"__inactives"}}),_=q=e,C=[],o.onStateRegistered(function(t){t.self.sticky===!0&&a.registerStickyState(t.self)});var $;u.$inject=["$delegate","$log","$q"],n.decorator("$state",u)}function g(t,n,r){var a=null,i=null,o={};t.$on("$transitionStart",function(t,e){function n(){i=null}function r(){a=i}var o=e.from,u=o.state&&o.state.$$state&&o.state.$$state();u&&(i=a,a=e.from,e.promise.then(n)["catch"](r))});var u={get:function(t){return t?o[t]:a},set:function(t,e,r){o[t]={state:n.get(e),params:r}},go:function(t,e){var a=u.get(t);return a?n.go(a.state,a.params,e):r.reject(new Error("no previous state "+(t?"for memo: "+t:"")))},memo:function(t,e,r){o[t]=a||{state:n.get(e),params:r}},forget:function(t){t?delete o[t]:a=e}};return u}function x(t){}function y(e){function n(e,n,r,a){function i(e){var n=a.invoke,r=a.instantiate;return a.invoke=function(r,a,i){return n(r,a,t.extend({$transition$:e},i))},a.instantiate=function(n,a){return r(n,t.extend({$transition$:e},a))},function(){a.invoke=n,a.instantiate=r}}function o(){p.pop()(),l.pop(),f--}function u(t,e){return function(r){return o(),n.$broadcast("$transitionSuccess",e),t.resolve(r),r}}function s(t,e){return function(a){return o(),n.$broadcast("$transitionError",e,a),t.reject(a),r.reject(a)}}var c=e.transitionTo,f=-1,l=[],p=[];return e.transitionTo=function(t,n,a){var i=r.defer(),o=l[++f]={promise:i.promise};p[f]=function(){};var v=c.apply(e,arguments);return v.then(u(i,o),s(i,o))},n.$on("$stateChangeStart",function(e,r,a,o,u){if(!(f>=l.length)){var s=f,c=t.extend(l[s],{to:{state:r,params:a},from:{state:o,params:u}}),v=i(c);p[s]=v,n.$broadcast("$transitionStart",c)}}),e}e.decorator("$state",n),n.$inject=["$delegate","$rootScope","$q","$injector"]}var S=t.module("ct.ui.router.extras.core",["ui.router"]),b={},E=[];n.$inject=["$stateProvider","$injector"],S.config(n);var j=t.forEach,k=t.extend,P=t.isArray,w=function(t,e){"use strict";var n=[];return j(t,function(t,r){n.push(e(t,r))}),n},F=function(t){"use strict";return w(t,function(t,e){return e})},R=function(t,e){"use strict";var n=[];return j(t,function(t,r){e(t,r)&&n.push(t)}),n},A=function(t,e){"use strict";var n={};return j(t,function(t,r){e(t,r)&&(n[r]=t)}),n};S.provider("uirextras_core",function(){var e={internalStates:b,onStateRegistered:c,forEach:j,extend:k,isArray:P,map:w,keys:F,filter:R,filterObj:A,ancestors:r,objectKeys:a,protoKeys:i,arraySearch:o,inheritParams:u,inherit:s};t.extend(this,e),this.$get=function(){return e}});var O;l.$inject=["$provide"],t.module("ct.ui.router.extras.dsr",["ct.ui.router.extras.core"]).config(l),p.$inject=["$rootScope","$state","$injector"],t.module("ct.ui.router.extras.dsr").service("$deepStateRedirect",p),t.module("ct.ui.router.extras.dsr").run(v),v.$inject=["$deepStateRedirect"],t.module("ct.ui.router.extras.sticky",["ct.ui.router.extras.core"]);var T=t.module("ct.ui.router.extras.sticky");d.$inject=["$stateProvider","uirextras_coreProvider"],T.provider("$stickyState",d);var I,_,q,M,b={},C=[],D={},N={hasParamSet:!1};h.$inject=["$stickyState"],t.module("ct.ui.router.extras.sticky").run(h),$.$inject=["$provide","$stateProvider","$stickyStateProvider","$urlMatcherFactoryProvider","uirextras_coreProvider"],t.module("ct.ui.router.extras.sticky").config($),function(t,e){function n(e,n,r,a){function i(e,n){var r=t.isObject(e)?e.name:e;return n?d[r]:p[r]}function o(t,e){if(e.name){var n=e.name.split(/\./);for("."===e.name.charAt(0)&&(n[0]=t.current.name);n.length;){var r=n.join(".");if(t.get(r,{relative:t.current}))return null;if(d[r])return d[r];n.pop()}}if(e.url){var a=[];for(var i in d){var o=d[i].urlMatcher;o&&o.exec(e.url)&&a.push(d[i])}for(var u=a.slice(0),s=a.length-1;s>=0;s--)for(var c=0;c<u.length;c++)a[s]===u[c].parentFutureState&&a.splice(s,1);return a[0]}}function u(t,e){function n(){delete d[e.name]}function r(t){return"remove"===l&&n(),a.reject(t)}m=!0;var a=t.get("$q");if(!e){var i=a.defer();return i.reject("No lazyState passed in "+e),i.promise}var o=a.when([]),s=e.parentFutureState;s&&d[s.name]&&(o=u(t,d[s.name]));var c=e.type,f=v[c];if(!f)throw Error("No state factory for futureState.type: "+(e&&e.type));var l=f.$options&&f.$options.failedLazyLoadPolicy||"remove";return o.then(function(r){var a=t.invoke(f,f,{futureState:e});return a.then(function(t){return n(),t&&r.push(t),r})})["catch"](r)}function s(t,n){var r=!1,a=["$rootScope","$urlRouter","$state",function(a,i,s){function c(){r=!0,i.sync(),r=!1}if(!$)return f().then(c),void($=!0);var l=o(s,{url:n.path()});return l?void u(t,l).then(function(t){t.forEach(function(t){t&&(!s.get(t)||t.name&&!s.get(t.name))&&e.state(t)}),m=!1,c()},function(){m=!1,c()}):t.invoke(x)}];if(!m){var i=r?x:a;return t.invoke(i)}}function c(n,r,a,i,s,c,l){function p(){if(i.$on("$stateNotFound",function(t,a,i,s){if(!m){var c=o(r,{name:a.to});if(c){t.preventDefault();var f=u(n,c);f.then(function(t){t.forEach(function(t){t&&(!r.get(t)||t.name&&!r.get(t.name))&&e.state(t)}),r.go(a.to,a.toParams,a.options),m=!1},function(t){console.log("failed to lazy load state ",t),i.name&&r.go(i,s),m=!1})}}}),!f){var l=[];t.forEach(h,function(t){l.push(n.invoke(t))}),f=function(){return a.all(l)}}f().then(function p(){c(function(){r.transition?r.transition.then(p,p):s.sync()})})}return p(),y.state=e.state,y.futureState=g.futureState,y.get=g.get,y}var f,l=a,p=l.internalStates,v={},d={},m=!1,h=[],$=!1,g=this;this.addResolve=function(t){h.push(t)},this.stateFactory=function(t,e){v[t]=e},this.futureState=function(e){e.stateName&&(e.name=e.stateName),e.urlPrefix&&(e.url="^"+e.urlPrefix),d[e.name]=e;var n,a=e.name.split(/\./).slice(0,-1).join("."),o=i(e.parent||a);if(o)n=o.url||o.navigable&&o.navigable.url;else if(""===a)n=r.compile("");else{var u=i(e.parent||a,!0);if(!u)throw new Error("Couldn't determine parent state of future state. FutureState:"+t.toJson(e));var s;s=u.urlMatcher?u.urlMatcher.source.replace(/\*rest$/,""):"",n=r.compile(s),e.parentFutureState=u}e.url&&(e.urlMatcher="^"===e.url.charAt(0)?r.compile(e.url.substring(1)+"*rest"):n.concat(e.url+"*rest"))},this.get=function(){return t.extend({},d)};var x=["$log","$location",function(t,e){}];n.otherwise(s),n.otherwise=function(e){if(t.isString(e)){var r=e;e=function(){return r}}else if(!t.isFunction(e))throw new Error("'rule' must be a function");return x=["$injector","$location",e],n};var y={getResolvePromise:function(){return f()}};this.$get=c,c.$inject=["$injector","$state","$q","$rootScope","$urlRouter","$timeout","$log"]}function r(e){var n=e.state;e.state=function(){var r=n.apply(e,arguments),a=t.isObject(arguments[0])?arguments[0]:arguments[1];return o.state(a),r}}function a(t,e){o.itsNowRuntimeOhWhatAHappyDay(e)}var i=t.module("ct.ui.router.extras.future",["ct.ui.router.extras.core"]);n.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","uirextras_coreProvider"],i.provider("$futureState",n);var o={state:function(t){o.$rootScope&&o.$rootScope.$broadcast("$stateAdded",t)},itsNowRuntimeOhWhatAHappyDay:function(t){o.$rootScope=t},$rootScope:e};r.$inject=["$stateProvider"],i.config(r),a.$inject=["$futureState"],i.run(a)}(t),g.$inject=["$rootScope","$state","$q"],t.module("ct.ui.router.extras.previous",["ct.ui.router.extras.core","ct.ui.router.extras.transition"]).service("$previousState",g),x.$inject=["$previousState"],t.module("ct.ui.router.extras.previous").run(x),t.module("ct.ui.router.extras.transition",["ct.ui.router.extras.core"]).config(y),y.$inject=["$provide"],function(){"use strict";function e(e,n,r){return{scope:{width:"@",height:"@"},restrict:"AE",template:"<svg></svg>",link:function(n,a,i){function o(e){e=e.map(function(e){return""===e.name?p:t.copy(e)}),t.extend(s,e.reduce(function(t,e){return t[e.name]=e,t},{})),e.forEach(function(t){var e=t.name.split(/\./).slice(0,-1).join("."),n=t.name!=e&&s[e];n&&((n.children||(n.children=[])).push(t),t.px=n.px,t.py=n.py,v.push(t))})}function u(){function t(t){var e=t.name.split(".").pop();return t.sticky&&(e+=" (STICKY)"),t.deepStateRedirect&&(e+=" (DSR)"),e}$=$.data(l.nodes(p),function(t){return t.name}),g=g.data(l.links(v),function(t){return t.target.name}),x=x.data(d),v.forEach(function(t){t.y=70*t.depth});var e=$.enter();x.enter().append("circle").attr("class","active").attr("r",13).attr("cx",function(t){return t.parent.px||100}).attr("cy",function(t){return t.parent.py||100}),e.append("circle").attr("class","node").attr("r",9).attr("cx",function(t){return t.parent.px}).attr("cy",function(t){return t.parent.py}),e.append("text").attr("class","label").attr("x",function(t){return t.parent.px}).attr("y",function(t){return t.parent.py}).attr("text-anchor",function(t){return"middle"}).text(t).style("fill-opacity",1),g.enter().insert("path",".node").attr("class","link").attr("d",function(t){var e={x:t.source.px,y:t.source.py};return m({source:e,target:e})});var n=h.transition().duration(S);n.selectAll(".link").attr("d",m);var r={entered:"#AF0",exited:"#777",active:"#0f0",inactive:"#55F",future:"#009"};n.selectAll(".node").attr("cx",function(t){return t.px=t.x}).attr("cy",function(t){return t.py=t.y}).attr("r",function(t){return"active"===t.status?15:10}).style("fill",function(t){return r[t.status]||"#FFF"}),n.selectAll(".label").attr("x",function(t){return t.px=t.x}).attr("y",function(t){return t.py=t.y-15}).attr("transform",function(t){return"rotate(-25 "+t.x+" "+t.y+")"}),n.selectAll(".active").attr("x",function(t){return t.px=t.x}).attr("y",function(t){return t.py=t.y-15})}var s={},c=n.width||400,f=n.height||400,l=d3.layout.tree().size([c-20,f-20]).separation(function(t,e){return t.parent==e.parent?10:25}),p=e.get().filter(function(t){return""===t.name})[0],v=l(p);p.parent=p,p.px=p.x=c/2,p.py=p.y=f/2;var d={};d.px=d.x=p.px,d.py=d.y=p.py;var m=d3.svg.diagonal(),h=d3.select(a.find("svg")[0]).attr("width",c).attr("height",f).append("g").attr("transform","translate(10, 10)"),$=h.selectAll(".node"),g=h.selectAll(".link"),x=h.selectAll(".active"),y=200,S=200;setInterval(u,y);r(function(){n.states=e.get(),t.forEach(v,function(t){var n=e.get(t.name);n&&(t.status=n.status||"exited")})},250),n.$watchCollection("states",function(t,e){var n=(e||[]).map(function(t){return t.name});o((t||[]).filter(function(t){return n.indexOf(t.name)==-1}))}),u(y)}}}var n=t.module("ct.ui.router.extras.statevis",["ct.ui.router.extras.core","ct.ui.router.extras.sticky"]);n.directive("stateVis",e),e.$inject=["$state","$timeout","$interval"]}(),t.module("ct.ui.router.extras",["ct.ui.router.extras.core","ct.ui.router.extras.dsr","ct.ui.router.extras.future","ct.ui.router.extras.previous","ct.ui.router.extras.statevis","ct.ui.router.extras.sticky","ct.ui.router.extras.transition"])});
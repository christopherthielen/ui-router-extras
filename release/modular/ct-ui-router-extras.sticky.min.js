/** UI-Router Extras v.0.0.13 Module: sticky http://christopherthielen.github.io/ui-router-extras/ - MIT License */
!function(e,t){"use strict";function n(t,n){var a=n,r=a.inheritParams,o=(a.objectKeys,a.protoKeys),s=a.map,i={},l={},c=!1;this.registerStickyState=function(e){l[e.name]=e},this.enableDebug=this.debugMode=function(t){return e.isDefined(t)&&(c=t),c},this.$get=["$rootScope","$state","$stateParams","$injector","$log",function(t,n,a,l,f){function v(){var t={};return e.forEach(i,function(e,n){for(var a=h(e),r=0;r<a.length;r++){var o=a[r].parent;t[o.name]=t[o.name]||[],t[o.name].push(e)}t[""]&&(t.__inactives=t[""])}),t}function d(){var e={};return forEach(i,function(t){forEach(t.path,function(n){n!==t&&(e[n.name]=e[n.name]||[],e[n.name].push(t))})}),e}function h(e){var t=[];if(!e)return t;do e.sticky&&t.push(e),e=e.parent;while(e);return t.reverse(),t}function m(e,t,n){if(e[n]===t[n])return{from:!1,to:!1};var a=n<e.length&&e[n].self.sticky,r=n<t.length&&t[n].self.sticky;return{from:a,to:r}}function p(e,t,n,a){if(a)return"updateStateParams";var r=i[e.self.name];if(!r)return"enter";if(e.self===n)return"updateStateParams";var o=$(t,r.locals.globals.$stateParams,e.ownParams);return o?"reactivate":"updateStateParams"}function g(e,t){if(!e)return null;var n=i[e.name];if(!n)return null;if(!t)return n;var a=$(t,n.locals.globals.$stateParams,e.ownParams);return a?n:null}function $(t,n,a){if(!e.isArray(a)&&e.isObject(a)&&(a=o(a,["$$keys","$$values","$$equals","$$validates","$$new","$$parent"])),!a){a=[];for(var r in t)a.push(r)}for(var s=0;s<a.length;s++){var i=a[s];if(t[i]!=n[i])return!1}return!0}var x={getInactiveStates:function(){var t=[];return e.forEach(i,function(e){t.push(e)}),t},getInactiveStatesByParent:function(){return v()},processTransition:function(t){var o={inactives:[],enter:[],exit:[],keep:0},u=t.fromState.path,l=t.fromParams,c=t.toState.path,f=t.toParams,v=t.reloadStateTree,h=t.options,g=0,x=c[g];for(h.inherit&&(f=r(a,f||{},n.$current,t.toState));x&&x===u[g]&&$(f,l,x.ownParams);)x=c[++g];o.keep=g;var E,S,P,b={},k=m(u,c,g),y=!!h.reload,w=[],R=[],F=[],T=[];for(E=g;E<u.length;E++)k.from?(o.inactives.push(u[E]),w.push(u[E]),o.exit[E]="inactivate"):(T.push(u[E]),o.exit[E]="exit");for(E=g;E<c.length;E++){var _=k.to?p(c[E],f,v,y):"enter";y=y||"updateStateParams"==_,o.enter[E]=_,"reactivate"==_?(R.push(c[E]),P=b[c[E].name]=c[E]):"updateStateParams"==_&&(S=b[c[E].name]=c[E]),F.push(c[E])}var I=d(),j=[];P===t.toState&&(j=I[P.name]||[]),T=T.concat(j);var C=s(T,function(e){return I[e.name]||[]});return forEach(C,function(e){T=T.concat(e)}),w=w.concat(s(i,e.identity)),w=w.filter(function(e){return-1===T.indexOf(e)&&-1===F.indexOf(e)}),o.inactives=w,o.reactivatingStates=R,o.deepestReactivateChildren=j,o},stateInactivated:function(e){i[e.self.name]=e,e.self.status="inactive",e.self.onInactivate&&l.invoke(e.self.onInactivate,e.self,e.locals.globals)},stateReactivated:function(e){i[e.self.name]&&delete i[e.self.name],e.self.status="entered",e.self.onReactivate&&l.invoke(e.self.onReactivate,e.self,e.locals.globals)},stateExiting:function(t,n,a){var r={};e.forEach(n,function(e){r[e.self.name]=!0}),e.forEach(i,function(n,a){!r[a]&&n.includes[t.name]&&(c&&f.debug("Exiting "+a+" because it's a substate of "+t.name+" and wasn't found in ",r),n.self.onExit&&l.invoke(n.self.onExit,n.self,n.locals.globals),e.forEach(n.locals,function(e,t){delete u.locals[t]}),n.locals=null,n.self.status="exited",delete i[a])}),a&&l.invoke(a,t.self,t.locals.globals),t.locals=null,t.self.status="exited",delete i[t.self.name]},stateEntering:function(e,t,n,a){var r=g(e);if(r&&(a||!g(e,t))){var o=e.locals;this.stateExiting(r),e.locals=o}e.self.status="entered",n&&l.invoke(n,e.self,e.locals.globals)},reset:function(e,a){var r=n.get(e);if(!r)return!1;var o=g(r,a);return o?(x.stateExiting(o),t.$broadcast("$viewContentLoading"),!0):!1}};return x}]}function a(e){return{resolve:{},locals:{globals:s&&s.locals&&s.locals.globals},views:{},self:{},params:{},ownParams:f.hasParamSet?{$$equals:function(){return!0}}:[],surrogateType:e}}e.module("ct.ui.router.extras.sticky",["ct.ui.router.extras.core"]);var r=e.module("ct.ui.router.extras.sticky");n.$inject=["$stateProvider","uirextras_coreProvider"],r.provider("$stickyState",n);var o,s,i,u,l=[],c={},f={hasParamSet:!1};e.module("ct.ui.router.extras.sticky").run(["$stickyState",function(e){o=e}]),e.module("ct.ui.router.extras.sticky").config(["$provide","$stateProvider","$stickyStateProvider","$urlMatcherFactoryProvider","uirextras_coreProvider",function(n,r,v,d,h){function m(t,n,a){function r(e,t,n){return e[t]?e[t].toUpperCase()+": "+n.self.name:"("+n.self.name+")"}var s=E(a.inactives,function(e){return e.self.name}),i=E(n.toState.path,function(e,t){return r(a.enter,t,e)}),u=E(n.fromState.path,function(e,t){return r(a.exit,t,e)}),l=n.fromState.self.name+": "+e.toJson(n.fromParams)+":  -> "+n.toState.self.name+": "+e.toJson(n.toParams);t.debug("   Current transition: ",l),t.debug("Before transition, inactives are:   : ",E(o.getInactiveStates(),function(e){return e.self.name})),t.debug("After transition,  inactives will be: ",s),t.debug("Transition will exit:  ",u),t.debug("Transition will enter: ",i)}function p(e,t,n){e.debug("Current state: "+t.self.name+", inactive states: ",E(o.getInactiveStates(),function(e){return e.self.name}));for(var a=function(e,t){return"'"+t+"' ("+e.$$state.name+")"},r=function(e,t){return"globals"!=t&&"resolve"!=t},s=function(e){var t=E(S(e.locals,r),a).join(", ");return"("+(e.self.name?e.self.name:"root")+".locals"+(t.length?": "+t:"")+")"},i=s(t),u=t.parent;u&&u!==t;)""===u.self.name&&(i=s(n.$current.path[0])+" / "+i),i=s(u)+" / "+i,t=u,u=t.parent;e.debug("Views: "+i)}var g=h,$=g.internalStates,x=g.inherit,E=(g.inheritParams,g.map),S=g.filterObj;f.hasParamSet=!!d.ParamSet,u=e.extend(new a("__inactives"),{self:{name:"__inactives"}}),s=i=t,l=[],h.onStateRegistered(function(e){e.self.sticky===!0&&v.registerStickyState(e.self)});var P;n.decorator("$state",["$delegate","$log","$q",function(n,r,h){return s=n.$current,$[""]=s,s.parent=u,u.parent=t,u.locals=x(c,u.locals),s.locals=x(u.locals,s.locals),delete u.locals.globals,P=n.transitionTo,n.transitionTo=function(t,g,x){function S(t){var n=e.extend(new a("reactivate_phase1"),{locals:t.locals});return n.self=e.extend({},t.self),n}function b(t){var n=e.extend(new a("reactivate_phase2"),t),r=n.self.onEnter;return n.resolve={},n.views={},n.self.onEnter=function(){n.locals=t.locals,o.stateReactivated(t)},K.addRestoreFunction(function(){t.self.onEnter=r}),n}function k(e){var t=new a("inactivate");t.self=e.self;var n=e.self.onExit;return t.self.onExit=function(){o.stateInactivated(e)},K.addRestoreFunction(function(){e.self.onExit=n}),t}function y(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){o.stateEntering(e,t,n)},K.addRestoreFunction(function(){e.self.onEnter=n}),e}function w(e,t){var n=e.self.onEnter;return e.self.onEnter=function(){o.stateEntering(e,t,n,!0)},K.addRestoreFunction(function(){e.self.onEnter=n}),e}function R(e){var t=e.self.onExit;return e.self.onExit=function(){o.stateExiting(e,D,t)},K.addRestoreFunction(function(){e.self.onExit=t}),e}var F=v.debugMode();u.locals||(u.locals=s.locals);var T=l.length;i&&(i(),F&&r.debug("Restored paths from pending transition"));var _,I,j,C,O=n.$current,M=n.params,q=x&&x.relative||n.$current,A=n.get(t,q),B=[],D=[];g=g||{},arguments[1]=g;var J=function(){},K=function(){_&&(L.path=_,_=null),I&&(O.path=I,I=null),e.forEach(K.restoreFunctions,function(e){e()}),K=J,i=null,l.splice(T,1)};if(K.restoreFunctions=[],K.addRestoreFunction=function(e){this.restoreFunctions.push(e)},A){var L=$[A.name];if(L){_=L.path,I=O.path;var U=x&&x.reload||!1,V=U&&(U===!0?_[0].self:n.get(U,q));x&&U&&U!==!0&&delete x.reload;var z={toState:L,toParams:g||{},fromState:O,fromParams:M||{},options:x,reloadStateTree:V};if(l.push(z),i=K,V){z.toParams.$$uirouterextrasreload=Math.random();var G=V.$$state().params,H=V.$$state().ownParams;if(f.hasParamSet){var N=new d.Param("$$uirouterextrasreload");G.$$uirouterextrasreload=H.$$uirouterextrasreload=N,K.restoreFunctions.push(function(){delete G.$$uirouterextrasreload,delete H.$$uirouterextrasreload})}else G.push("$$uirouterextrasreload"),H.push("$$uirouterextrasreload"),K.restoreFunctions.push(function(){G.length=G.length-1,H.length=H.length-1})}j=o.processTransition(z),F&&m(r,z,j);var Q=L.path.slice(0,j.keep),W=O.path.slice(0,j.keep);e.forEach(u.locals,function(e,t){-1!=t.indexOf("@")&&delete u.locals[t]});var X=function(e){return function(t,n){-1!==n.indexOf("@")&&(e[n]=t)}};forEach(j.inactives,function(e){forEach(e.locals,X(u.locals))}),forEach(j.reactivatingStates,function(e){forEach(e.locals,X(c))}),K.addRestoreFunction(function(){forEach(c,function(e,t){delete c[t]})}),e.forEach(j.enter,function(e,t){var n,a=L.path[t];"reactivate"===e?(n=S(a),Q.push(n),W.push(n),B.push(b(a)),C=a):"updateStateParams"===e?(Q.push(w(a)),C=a):"enter"===e&&Q.push(y(a))}),e.forEach(j.exit,function(e,t){var n=O.path[t];"inactivate"===e?(W.push(k(n)),D.push(n)):"exit"===e&&(W.push(R(n)),D.push(n))}),B.length&&e.forEach(B,function(e){Q.push(e)});var Y=j.deepestReactivateChildren;W=W.concat(E(j.deepestReactivateChildren,function(e){return R(e)})),D=D.concat(Y),O.path=W,L.path=Q;var Z=function(e){return(e.surrogateType?e.surrogateType+":":"")+e.self.name};F&&r.debug("SurrogateFromPath: ",E(W,Z)),F&&r.debug("SurrogateToPath:   ",E(Q,Z))}}var ee=P.apply(n,arguments);return ee.then(function(e){return K(),F&&p(r,$[e.name],n),e.status="active",e},function(e){return K(),F&&"transition prevented"!==e.message&&"transition aborted"!==e.message&&"transition superseded"!==e.message&&(r.debug("transition failed",e),r.debug(e.stack)),h.reject(e)})},n}])}])}(angular);
/** UI-Router Extras v.0.1.3 Module: dsr http://christopherthielen.github.io/ui-router-extras/ - MIT License */
!function(t,e){"use strict";function r(){o=e}function n(t){function e(t,e){return n=t.transitionTo,t.transitionTo=function(a,i,u){return u&&u.ignoreDsr&&(o=u.ignoreDsr),n.apply(t,arguments).then(function(t){return r(),t},function(t){return r(),e.reject(t)})},t}var n;e.$inject=["$delegate","$q"],t.decorator("$state",e)}function a(r,n,a){function i(t){var e=t.name;return v.hasOwnProperty(e)?v[e]:void s(e)}function u(e){var r=e.deepStateRedirect||e.dsr;if(!r)return{dsr:!1};var n={dsr:!0};return t.isFunction(r)?n.fn=r:t.isObject(r)&&(n=t.extend(n,r)),t.isString(n["default"])&&(n["default"]={state:n["default"]}),n.fn||(n.fn=["$dsr$",function(t){return t.redirect.state!=t.to.state}]),n}function s(t){var r=n.get(t);if(!r)return!1;var a=u(r);a.dsr&&(v[r.name]=$,d[t]===e&&(d[t]={}));var i=r.$$state&&r.$$state().parent;if(i){var o=s(i.self.name);o&&v[r.name]===e&&(v[r.name]=m)}return v[r.name]||!1}function c(r,n){n===!0&&(n=Object.keys(r)),null!==n&&n!==e||(n=[]);var a={};return t.forEach(n.sort(),function(t){a[t]=r[t]}),a}function f(e,r){function n(t){return t?t.toString():t}var a=c(e,r),i={};return t.forEach(a,function(t,e){i[e]=n(t)}),t.toJson(i)}var d={},v={},$="Redirect",m="AncestorRedirect";return r.$on("$stateChangeStart",function(e,r,s,v,m){var p=u(r);if(!o&&(i(r)===$||p["default"])){var l=f(s,p.params),g=d[r.name][l]||p["default"];if(g){var h={redirect:{state:g.state,params:g.params},to:{state:r.name,params:s}},j=a.invoke(p.fn,r,{$dsr$:h});if(j){j.state&&(g=j),e.preventDefault();var S=c(s,p.params);n.go(g.state,t.extend(S,g.params))}}}}),r.$on("$stateChangeSuccess",function(e,r,a,o,s){var c=i(r);if(c){var v=r.name;t.forEach(d,function(e,i){var o=u(n.get(i)),s=f(a,o.params);r.$$state().includes[i]&&(d[i][s]={state:v,params:t.copy(a)})})}}),{getRedirect:function(t,e){var r=n.get(t);i(r);var a=u(r),o=f(e,a.params),s=d[r.name];return s=s&&s[o]?s[o]:a["default"]},reset:function(e,r){if(e){var a=n.get(e);if(!a)throw new Error("Unknown state: "+e);if(d[a.name])if(r){var i=f(r,u(a).params);delete d[a.name][i]}else d[a.name]={}}else t.forEach(d,function(t,e){d[e]={}})}}}function i(t){}var o;n.$inject=["$provide"],t.module("ct.ui.router.extras.dsr",["ct.ui.router.extras.core"]).config(n),a.$inject=["$rootScope","$state","$injector"],t.module("ct.ui.router.extras.dsr").service("$deepStateRedirect",a),t.module("ct.ui.router.extras.dsr").run(i),i.$inject=["$deepStateRedirect"]}(angular);